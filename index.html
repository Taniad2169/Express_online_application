<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Express Capital Associates Application</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: white;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
        }

        .header-banner {
            background-color: #24345e;
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 8px 8px 0 0;
            margin-bottom: 30px;
        }

        .header-banner h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .header-banner h2 {
            font-size: 1.3em;
            font-weight: normal;
            font-style: italic;
        }

        .form-section {
            background-color: white;
            padding: 30px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            color: #24345e;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        input[type="text"],
        input[type="tel"],
        input[type="date"] {
            width: 100%;
            padding: 14px 18px;
            border: 3px solid #24345e;
            background-color: #e1e3e8;
            border-radius: 8px;
            font-size: 1em;
            color: #24345e;
            box-shadow: inset 4px 4px 8px rgba(0,0,0,0.2), 
                        inset -4px -4px 8px rgba(255,255,255,0.7),
                        2px 2px 4px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="tel"]:focus,
        input[type="date"]:focus {
            outline: none;
            border-color: #24345e;
            box-shadow: inset 5px 5px 10px rgba(0,0,0,0.25), 
                        inset -5px -5px 10px rgba(255,255,255,0.8),
                        0 0 0 3px rgba(36, 52, 94, 0.15);
        }

        .upload-section {
            display: none;
            margin-top: 30px;
            padding: 25px;
            background-color: white;
            border: 2px solid #24345e;
            border-radius: 8px;
        }

        .upload-section h3 {
            color: #24345e;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .upload-item {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #e1e3e8;
            border-radius: 6px;
            border: 2px solid #24345e;
        }

        .upload-item label {
            display: block;
            margin-bottom: 10px;
        }

        input[type="file"] {
            width: 100%;
            padding: 8px;
            border: 2px solid #24345e;
            border-radius: 4px;
            background-color: white;
            color: #24345e;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            cursor: pointer;
        }

        .checkbox-container label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
        }

        .disclaimer-section {
            display: none;
            margin-top: 30px;
            padding: 25px;
            background-color: #e1e3e8;
            border: 2px solid #24345e;
            border-radius: 8px;
        }

        .disclaimer-section h3 {
            color: #24345e;
            margin-bottom: 15px;
        }

        .disclaimer-text {
            color: #24345e;
            line-height: 1.8;
            font-size: 0.95em;
            margin-bottom: 20px;
            text-align: justify;
        }

        .acknowledge-checkbox {
            display: flex;
            align-items: flex-start;
            margin: 20px 0;
            padding: 15px;
            background-color: #ffffcc;
            border-radius: 6px;
        }

        .acknowledge-checkbox input[type="checkbox"] {
            width: 22px;
            height: 22px;
            margin-right: 12px;
            cursor: pointer;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .acknowledge-checkbox label {
            margin: 0;
            font-weight: 600;
            color: #24345e;
            cursor: pointer;
        }

        .signature-section {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background-color: #ffffcc;
            border-radius: 6px;
        }

        .signature-section h4 {
            color: #24345e;
            margin-bottom: 15px;
        }

        #signaturePad {
            border: 2px solid #24345e;
            background-color: white;
            border-radius: 6px;
            cursor: crosshair;
            display: block;
            width: 100%;
            max-width: 600px;
            height: 200px;
        }

        .signature-buttons {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        button {
            padding: 12px 30px;
            background-color: #24345e;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        button:hover {
            background-color: #1a2644;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        button:active {
            transform: translateY(0);
        }

        .submit-section {
            margin-top: 30px;
            text-align: center;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .action-buttons button {
            min-width: 150px;
        }

        .email-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .email-modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            border: 3px solid #24345e;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .email-modal h3 {
            color: #24345e;
            margin-bottom: 20px;
        }

        .email-modal input {
            width: 100%;
            padding: 12px;
            border: 2px solid #24345e;
            border-radius: 6px;
            margin-bottom: 15px;
            font-size: 1em;
        }

        .email-modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .email-modal-buttons button {
            min-width: 100px;
        }

        .cancel-btn {
            background-color: #666;
        }

        .cancel-btn:hover {
            background-color: #555;
        }

        @media print {
            .action-buttons,
            button {
                display: none !important;
            }
        }

        .success-message {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background-color: #4CAF50;
            color: white;
            border-radius: 6px;
            text-align: center;
            font-size: 1.1em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-banner">
            <h1>Express Capital Associates</h1>
            <h2>Soaring Above the Competition</h2>
        </div>

        <div class="form-section">
            <form id="applicationForm" action="https://formspree.io/f/xjkakgpo" method="POST">
                <div class="form-group">
                    <label for="name">Full Name *</label>
                    <input type="text" id="name" name="name" required>
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number *</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>

                <div class="form-group">
                    <label for="company">Company Name *</label>
                    <input type="text" id="company" name="company" required>
                </div>

                <div class="form-group">
                    <label for="date">Today's Date *</label>
                    <input type="date" id="date" name="date" required>
                </div>

                <div class="upload-section" id="uploadSection">
                    <h3>Document Upload</h3>
                    
                    <div class="upload-item">
                        <label for="driverLicense">Copy of Driver's License *</label>
                        <input type="file" id="driverLicense" accept="image/*,.pdf" required>
                        <div class="checkbox-container">
                            <input type="checkbox" id="dlCheck">
                            <label for="dlCheck">Document uploaded</label>
                        </div>
                    </div>

                    <div class="upload-item">
                        <label for="voidedCheck">Copy of Voided Check *</label>
                        <input type="file" id="voidedCheck" accept="image/*,.pdf" required>
                        <div class="checkbox-container">
                            <input type="checkbox" id="checkCheck">
                            <label for="checkCheck">Document uploaded</label>
                        </div>
                    </div>

                    <div class="upload-item">
                        <label for="bankStatements">4 Months Most Recent Bank Statements *</label>
                        <input type="file" id="bankStatements" accept=".pdf,image/*" multiple required>
                        <div class="checkbox-container">
                            <input type="checkbox" id="statementsCheck">
                            <label for="statementsCheck">Documents uploaded</label>
                        </div>
                    </div>
                </div>

                <div class="disclaimer-section" id="disclaimerSection">
                    <h3>Disclaimer</h3>
                    <div class="disclaimer-text">
                        By signing above, each of the above listed business and business owner/officer (individually and collectively, "you") authorize Express Capital Network Associates and its agents, banks or financial institutions to obtain an investigative or consumer report from a credit bureau or a credit agency and to investigate the references given on any other statements or data obtained from applicant. You also authorize Express Capital Network Associates to transmit this application form, with any of the foregoing information obtained in connection with this application, to any or all of the Recipients for the foregoing purposes. You also consent to the release, by any creditor or financial institution, of any information relating to any of you, to Express Capital Network Associates and to each of the Recipients, on its own behalf. I am providing my business cell-phone and business e-mail address and hereby consent to the receipt of correspondence/messages regarding transactions with Express Capital Network Associates and/or its affiliates on either medium. I certify that all the information contained herein is complete, true and accurate. Express Capital Network Associate is not a lender or a bank. We do not provide loans or make credit decisions. Our service connects businesses like yours with a network of trusted third-party funding providers who offer Merchant Cash Advances (MCAs) and other commercial financing products. A Merchant Cash Advance (MCA) is a purchase of future receivables, not a loan. It is not subject to the same regulatory requirements as traditional loans and may have different terms and conditions. Please be aware that MCAs may involve higher costs compared to traditional financing options. All funding offers are subject to the individual provider's underwriting and approval processes. Express Capital Network Associate may receive a referral fee or commission if your business is funded through one of our partners. We strongly advise you to consult with a qualified financial advisor to determine if an MCA or any other financing product is suitable for your specific business needs. By submitting this application, you agree to be contacted by phone, SMS, or email regarding commercial financing products, in accordance with our Privacy Policy.
                    </div>

                    <div class="acknowledge-checkbox">
                        <input type="checkbox" id="acknowledgeCheck">
                        <label for="acknowledgeCheck">I acknowledge I have read and understood the terms and conditions of the application</label>
                    </div>

                    <div class="signature-section" id="signatureSection">
                        <h4>Electronic Signature</h4>
                        <canvas id="signaturePad"></canvas>
                        <div class="signature-buttons">
                            <button type="button" id="clearSignature">Clear Signature</button>
                        </div>
                    </div>
                </div>

                <div class="submit-section">
                    <button type="submit" id="submitBtn" style="display:none;">Submit Application</button>
                </div>

                <div class="action-buttons">
                    <button type="button" id="printBtn">Print Application</button>
                    <button type="button" id="emailBtn">Email to Client</button>
                    <button type="button" id="finalSubmitBtn">Submit Completed Application</button>
                </div>

                <div class="success-message" id="successMessage">
                    ✓ Application submitted successfully!
                </div>
            </form>
        </div>

        <!-- Email Modal -->
        <div class="email-modal" id="emailModal">
            <div class="email-modal-content">
                <h3>Email Application to Client</h3>
                <label for="clientEmail" style="display: block; margin-bottom: 8px; color: #24345e; font-weight: 600;">Client Email Address:</label>
                <input type="email" id="clientEmail" placeholder="client@example.com" required>
                <div class="email-modal-buttons">
                    <button type="button" class="cancel-btn" id="cancelEmail">Cancel</button>
                    <button type="button" id="sendEmail">Send Email</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set today's date as default
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('date').value = today;

        // Show upload section when last field is focused
        const dateField = document.getElementById('date');
        const uploadSection = document.getElementById('uploadSection');
        const disclaimerSection = document.getElementById('disclaimerSection');
        const signatureSection = document.getElementById('signatureSection');
        const acknowledgeCheck = document.getElementById('acknowledgeCheck');
        const submitBtn = document.getElementById('submitBtn');

        dateField.addEventListener('focus', function() {
            uploadSection.style.display = 'block';
        });

        // Track upload checkboxes
        const dlCheck = document.getElementById('dlCheck');
        const checkCheck = document.getElementById('checkCheck');
        const statementsCheck = document.getElementById('statementsCheck');

        function checkAllUploads() {
            if (dlCheck.checked && checkCheck.checked && statementsCheck.checked) {
                disclaimerSection.style.display = 'block';
                disclaimerSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        dlCheck.addEventListener('change', checkAllUploads);
        checkCheck.addEventListener('change', checkAllUploads);
        statementsCheck.addEventListener('change', checkAllUploads);

        // Show signature pad when acknowledge checkbox is checked
        acknowledgeCheck.addEventListener('change', function() {
            if (this.checked) {
                signatureSection.style.display = 'block';
                submitBtn.style.display = 'inline-block';
                signatureSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                initSignaturePad();
            } else {
                signatureSection.style.display = 'none';
                submitBtn.style.display = 'none';
            }
        });

        // Signature pad functionality
        let canvas, ctx, isDrawing = false, hasSignature = false;

        function initSignaturePad() {
            canvas = document.getElementById('signaturePad');
            ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = canvas.offsetWidth;
            canvas.height = 200;
            
            ctx.strokeStyle = '#24345e';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';

            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            // Touch events for mobile
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }

        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            ctx.beginPath();
            ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }

        function draw(e) {
            if (!isDrawing) return;
            hasSignature = true;
            const rect = canvas.getBoundingClientRect();
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 'mousemove', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }

        document.getElementById('clearSignature').addEventListener('click', function() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            hasSignature = false;
        });

        // Form submission
        document.getElementById('applicationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!hasSignature) {
                alert('Please provide your signature before submitting.');
                return;
            }

            // Get signature as data URL
            const signatureData = canvas.toDataURL();
            
            // Create hidden input for signature
            let signatureInput = document.getElementById('signatureData');
            if (!signatureInput) {
                signatureInput = document.createElement('input');
                signatureInput.type = 'hidden';
                signatureInput.name = 'signature';
                signatureInput.id = 'signatureData';
                this.appendChild(signatureInput);
            }
            signatureInput.value = signatureData;

            // Submit the form
            this.submit();
        });

        // Final Submit Button
        document.getElementById('finalSubmitBtn').addEventListener('click', function() {
            const form = document.getElementById('applicationForm');
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const company = document.getElementById('company').value;
            const date = document.getElementById('date').value;

            // Check if basic fields are filled
            if (!name || !phone || !company || !date) {
                alert('Please fill out all required fields before submitting.');
                return;
            }

            // Check if documents are uploaded
            if (!dlCheck.checked || !checkCheck.checked || !statementsCheck.checked) {
                alert('Please upload all required documents before submitting.');
                return;
            }

            // Check if disclaimer is acknowledged
            if (!acknowledgeCheck.checked) {
                alert('Please read and acknowledge the terms and conditions before submitting.');
                return;
            }

            // Check if signature is provided
            if (!hasSignature) {
                alert('Please provide your signature before submitting.');
                return;
            }

            // Get signature as data URL
            const signatureData = canvas.toDataURL();
            
            // Create hidden input for signature
            let signatureInput = document.getElementById('signatureData');
            if (!signatureInput) {
                signatureInput = document.createElement('input');
                signatureInput.type = 'hidden';
                signatureInput.name = 'signature';
                signatureInput.id = 'signatureData';
                form.appendChild(signatureInput);
            }
            signatureInput.value = signatureData;

            // Submit the form
            form.submit();
        });

        // Print button
        document.getElementById('printBtn').addEventListener('click', function() {
            window.print();
        });

        // Email button - opens modal
        document.getElementById('emailBtn').addEventListener('click', function() {
            document.getElementById('emailModal').style.display = 'flex';
        });

        // Cancel email
        document.getElementById('cancelEmail').addEventListener('click', function() {
            document.getElementById('emailModal').style.display = 'none';
            document.getElementById('clientEmail').value = '';
        });

        // Send email
        document.getElementById('sendEmail').addEventListener('click', function() {
            const clientEmail = document.getElementById('clientEmail').value;
            
            if (!clientEmail || !clientEmail.includes('@')) {
                alert('Please enter a valid email address.');
                return;
            }

            // Get the current page URL
            const applicationURL = window.location.href;
            
            // Create email content
            const subject = 'Express Capital Associates - Application to Complete';
            const body = `Dear Client,

Please complete the following application form for Express Capital Associates:

${applicationURL}

This is a web-based application that you can fill out directly in your browser. Please complete all required fields, upload the necessary documents, and provide your electronic signature.

If you have any questions, please don't hesitate to reach out.

Best regards,
Express Capital Associates`;

            // Open default email client with pre-filled information
            const mailtoLink = `mailto:${clientEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoLink;

            // Close modal
            document.getElementById('emailModal').style.display = 'none';
            document.getElementById('clientEmail').value = '';
            
            alert(`Email draft created for ${clientEmail}. Your default email client should open with the application link.`);
        });
    </script>
</body>
</html>
